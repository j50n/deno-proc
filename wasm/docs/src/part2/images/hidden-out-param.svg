<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 220">
  <defs>
    <linearGradient id="odinBox" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#60a5fa"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <linearGradient id="wasmBox" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="hiddenParam" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f87171"/>
      <stop offset="100%" style="stop-color:#dc2626"/>
    </linearGradient>
    <marker id="arrH" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#64748b"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="300" y="25" text-anchor="middle" font-family="system-ui,sans-serif" font-size="16" font-weight="bold" fill="#1e293b">Hidden Out-Parameter for Struct Returns</text>
  
  <!-- What you write -->
  <text x="150" y="55" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="600" fill="#475569">What you write (Odin)</text>
  <rect x="30" y="65" width="240" height="45" rx="6" fill="url(#odinBox)"/>
  <text x="150" y="92" text-anchor="middle" font-family="monospace" font-size="11" fill="white">make_point(x, y: f64) -> Point</text>
  
  <!-- Arrow -->
  <path d="M150 115 L150 140" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrH)"/>
  <text x="165" y="132" font-family="system-ui,sans-serif" font-size="10" fill="#64748b">compiles to</text>
  
  <!-- What WASM sees -->
  <text x="150" y="160" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="600" fill="#475569">What WASM exports</text>
  <rect x="30" y="170" width="240" height="45" rx="6" fill="url(#wasmBox)"/>
  <text x="150" y="185" text-anchor="middle" font-family="monospace" font-size="10" fill="white">make_point(</text>
  <text x="150" y="200" text-anchor="middle" font-family="monospace" font-size="10" fill="white"><tspan fill="#fef2f2" font-weight="bold">out_ptr</tspan>, x, y) -> void</text>
  
  <!-- Correct JS call -->
  <text x="450" y="55" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="600" fill="#475569">Correct JavaScript call</text>
  <rect x="310" y="65" width="280" height="80" rx="6" fill="#f1f5f9" stroke="#94a3b8" stroke-width="1"/>
  <text x="325" y="88" font-family="monospace" font-size="10" fill="#1e293b">// Allocate space for result FIRST</text>
  <text x="325" y="105" font-family="monospace" font-size="10" fill="#1e293b">const ptr = alloc(16);</text>
  <text x="325" y="122" font-family="monospace" font-size="10" fill="#1e293b">make_point(<tspan fill="#dc2626" font-weight="bold">ptr</tspan>, 1.0, 2.0);</text>
  <text x="325" y="139" font-family="monospace" font-size="10" fill="#1e293b">// Read Point from ptr</text>
  
  <!-- Warning -->
  <rect x="310" y="160" width="280" height="50" rx="6" fill="#fef2f2" stroke="#dc2626" stroke-width="1"/>
  <text x="450" y="180" text-anchor="middle" font-family="system-ui,sans-serif" font-size="11" font-weight="600" fill="#dc2626">âš  Common mistake</text>
  <text x="450" y="198" text-anchor="middle" font-family="monospace" font-size="10" fill="#7f1d1d">make_point(1.0, 2.0) // WRONG!</text>
</svg>
